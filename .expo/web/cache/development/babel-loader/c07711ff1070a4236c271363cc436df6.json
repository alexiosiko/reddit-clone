{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { palette } from \"../styles/global-styles\";\nimport * as ImagePicker from 'expo-image-picker';\nimport * as ImageManipulator from 'expo-image-manipulator';\nimport * as FileSystem from 'expo-file-system';\nimport { useState } from \"react\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar ImportImage = function ImportImage(_ref) {\n  var setImage64 = _ref.setImage64;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    backgroundImageUri = _useState2[0],\n    setBackgroundImageUri = _useState2[1];\n  function handleOnInsertImage() {\n    return _handleOnInsertImage.apply(this, arguments);\n  }\n  function _handleOnInsertImage() {\n    _handleOnInsertImage = _asyncToGenerator(function* () {\n      var result = yield userSelectsImage();\n      if (result.cancelled) return;\n      result = yield uriTo800By800(result.uri);\n      var base64 = yield uriToBase64(result.uri);\n      setImage64(base64);\n      setBackgroundImageUri(result.uri);\n    });\n    return _handleOnInsertImage.apply(this, arguments);\n  }\n  function userSelectsImage() {\n    return _userSelectsImage.apply(this, arguments);\n  }\n  function _userSelectsImage() {\n    _userSelectsImage = _asyncToGenerator(function* () {\n      return yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 4],\n        quality: 1\n      });\n    });\n    return _userSelectsImage.apply(this, arguments);\n  }\n  function uriTo800By800(_x) {\n    return _uriTo800By.apply(this, arguments);\n  }\n  function _uriTo800By() {\n    _uriTo800By = _asyncToGenerator(function* (uri) {\n      return yield ImageManipulator.manipulateAsync(uri, [{\n        resize: {\n          height: 1080,\n          width: 1080\n        }\n      }], {\n        compress: 1,\n        format: ImageManipulator.SaveFormat.JPEG\n      });\n    });\n    return _uriTo800By.apply(this, arguments);\n  }\n  function uriToBase64(_x2) {\n    return _uriToBase.apply(this, arguments);\n  }\n  function _uriToBase() {\n    _uriToBase = _asyncToGenerator(function* (uri) {\n      return yield FileSystem.readAsStringAsync(uri, {\n        encoding: FileSystem.EncodingType.Base64\n      });\n    });\n    return _uriToBase.apply(this, arguments);\n  }\n  return _jsx(TouchableHighlight, {\n    style: styles.touchable,\n    onPress: handleOnInsertImage,\n    children: _jsx(ImageBackground, {\n      style: styles.imageBackground,\n      source: {\n        uri: backgroundImageUri\n      },\n      children: !backgroundImageUri && _jsx(Text, {\n        style: styles.buttonText,\n        children: \"Pick an image\"\n      })\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  touchable: {\n    marginLeft: '10%',\n    backgroundColor: palette.otherNeutral,\n    width: 50,\n    aspectRatio: 1 / 1,\n    borderRadius: 10\n  },\n  buttonText: {\n    color: palette.textcolor,\n    fontSize: 12,\n    textAlign: 'center',\n    padding: 2\n  },\n  imageBackground: {\n    justifyContent: 'center',\n    borderRadius: 10,\n    overflow: 'hidden',\n    width: '100%',\n    aspectRatio: 1 / 1\n  }\n});\nexport default ImportImage;","map":{"version":3,"names":["palette","ImagePicker","ImageManipulator","FileSystem","useState","jsx","_jsx","ImportImage","_ref","setImage64","_useState","_useState2","_slicedToArray","backgroundImageUri","setBackgroundImageUri","handleOnInsertImage","_handleOnInsertImage","apply","arguments","_asyncToGenerator","result","userSelectsImage","cancelled","uriTo800By800","uri","base64","uriToBase64","_userSelectsImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","_x","_uriTo800By","manipulateAsync","resize","height","width","compress","format","SaveFormat","JPEG","_x2","_uriToBase","readAsStringAsync","encoding","EncodingType","Base64","TouchableHighlight","style","styles","touchable","onPress","children","ImageBackground","imageBackground","source","Text","buttonText","StyleSheet","create","marginLeft","backgroundColor","otherNeutral","aspectRatio","borderRadius","color","textcolor","fontSize","textAlign","padding","justifyContent","overflow"],"sources":["C:/Users/alexi/Desktop/reddit-clone-0b981ea979a04dd91404b3a384f1c737d3fb26f5/src/frontend/components/InsertImage.js"],"sourcesContent":["import { ImageBackground, StyleSheet, Text, TouchableHighlight, View } from \"react-native\";\nimport { palette } from \"../styles/global-styles\";\nimport * as ImagePicker from 'expo-image-picker';\nimport * as ImageManipulator from 'expo-image-manipulator';\nimport * as FileSystem from 'expo-file-system';\nimport { useState } from \"react\";\n\nconst ImportImage = ({ setImage64 }) => {\n\tconst [backgroundImageUri, setBackgroundImageUri] = useState(null);\n\tasync function handleOnInsertImage() {\n\t\tlet result = await userSelectsImage();\t\t\t// User selects image\n\t\tif (result.cancelled) \t\t\t\t\t\t\t// If user cancels STOP\n\t\t\treturn;\t\t\t\t\t\n\t\tresult = await uriTo800By800(result.uri);\t\t// Convert image to 800 x 800\n\t\tconst base64 = await uriToBase64(result.uri);\t// Convert image to base64Code\n\t\tsetImage64(base64);\t\t\t\t\t\t\t\t// Store base64Code to parent\n\t\tsetBackgroundImageUri(result.uri);\n\t}\n\tasync function userSelectsImage() {\n\t\treturn await ImagePicker.launchImageLibraryAsync({\n\t\t\tmediaTypes: ImagePicker.MediaTypeOptions.Images,\n\t\t\tallowsEditing: true,\n\t\t\taspect: [4, 4],\n\t\t\tquality: 1,\n\t\t});\n\t}\n\tasync function uriTo800By800(uri) {\n\t\treturn await ImageManipulator.manipulateAsync(\n\t\t\turi,\n\t\t\t[{ resize: { height:1080,  width:1080 } }],\n\t\t\t{ compress: 1, format: ImageManipulator.SaveFormat.JPEG },\n\t\t);\n\t}\n\tasync function uriToBase64(uri){\n\t\treturn await FileSystem.readAsStringAsync(uri, {\n\t\t\tencoding: FileSystem.EncodingType.Base64,\n\t\t});\n\t}\n\n\treturn (\n\t\t<TouchableHighlight style={styles.touchable} onPress={handleOnInsertImage}>\n\t\t\t<ImageBackground style={styles.imageBackground} source={{ uri: backgroundImageUri}}>\n\t\t\t\t{!backgroundImageUri && <Text style={styles.buttonText}>Pick an image</Text>}\n\t\t\t</ImageBackground>\n\t\t</TouchableHighlight>\n\t\t)\n}\nconst styles = StyleSheet.create({\n\ttouchable: {\n\t\tmarginLeft: '10%',\n\t\tbackgroundColor: palette.otherNeutral,\n\t\twidth: 50,\n\t\taspectRatio: 1/1,\n\t\tborderRadius: 10,\n\t},\n\tbuttonText: {\n\t\tcolor: palette.textcolor,\n\t\tfontSize: 12,\n\t\ttextAlign: 'center',\n\t\tpadding: 2,\n\t},\n\timageBackground: {\n\t\tjustifyContent: 'center',\n\t\tborderRadius: 10,\n\t\toverflow: 'hidden',\n\t\twidth: '100%',\n\t\taspectRatio: 1/1\n\t}\n})\nexport default ImportImage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}