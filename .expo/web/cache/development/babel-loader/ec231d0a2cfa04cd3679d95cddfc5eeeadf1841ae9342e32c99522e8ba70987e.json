{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { palette } from \"../styles/global-styles\";\nimport Header from \"./Header\";\nimport * as ImagePicker from 'expo-image-picker';\nimport * as FileSystem from 'expo-file-system';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nfunction Create() {\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    title = _useState2[0],\n    setTitle = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    description = _useState4[0],\n    setDescription = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    image = _useState6[0],\n    setImage = _useState6[1];\n  function handleOnChangeTitle(title) {\n    setTitle(title);\n  }\n  function handleOnChangeDescription(description) {\n    setDescription(description);\n  }\n  function handleOnSubmit() {\n    if (title == \"\" || description == \"\") {\n      console.warn(\"required fields missing ...\");\n      return;\n    }\n    var post = createPost();\n    uploadPost(post);\n  }\n  function createPost() {\n    return {\n      title: title,\n      description: description,\n      owner: \"owner\",\n      likes: 0,\n      dislikes: 0\n    };\n  }\n  function uploadPost(_x) {\n    return _uploadPost.apply(this, arguments);\n  }\n  function _uploadPost() {\n    _uploadPost = _asyncToGenerator(function* (post) {\n      var response = yield fetch(\"http://192.168.1.72:5000/uploadpost\", {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(post)\n      });\n    });\n    return _uploadPost.apply(this, arguments);\n  }\n  function pickImage() {\n    return _pickImage.apply(this, arguments);\n  }\n  function _pickImage() {\n    _pickImage = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1\n      });\n      if (!result.canceled) {\n        var base64Code = yield FileSystem.readAsStringAsync(result.assets[0].uri, {\n          encoding: FileSystem.EncodingType.Base64\n        });\n        setImage(result.assets[0].uri);\n        console.log(base64Code);\n      }\n    });\n    return _pickImage.apply(this, arguments);\n  }\n  ;\n  return _jsxs(_Fragment, {\n    children: [_jsx(Header, {\n      header: \"Create\"\n    }), _jsxs(View, {\n      style: styles.body,\n      children: [_jsx(TextInput, {\n        style: styles.textInput,\n        placeholder: \"Title ...\",\n        onChangeText: handleOnChangeTitle\n      }), _jsx(TextInput, {\n        style: [styles.textInput, styles.description],\n        placeholder: \"Description ...\",\n        multiline: true,\n        maxLength: 700,\n        onChangeText: handleOnChangeDescription\n      }), _jsx(Button, {\n        title: \"Pick an image from camera roll\",\n        onpres: true\n      }), _jsx(TouchableHighlight, {\n        style: styles.button,\n        onPress: handleOnSubmit,\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \"Post\"\n        })\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  body: {\n    backgroundColor: palette.neutral,\n    width: '90%',\n    alignSelf: 'center'\n  },\n  textInput: {\n    borderRadius: 10,\n    padding: 6,\n    backgroundColor: palette.dark,\n    color: palette.textcolor,\n    margin: 5\n  },\n  description: {\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    height: 200\n  },\n  button: {\n    backgroundColor: 'red',\n    borderRadius: 10\n  },\n  buttonText: {\n    padding: 2\n  }\n});\nexport default Create;","map":{"version":3,"names":["palette","Header","ImagePicker","FileSystem","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Create","_useState","useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","description","setDescription","_useState5","_useState6","image","setImage","handleOnChangeTitle","handleOnChangeDescription","handleOnSubmit","console","warn","post","createPost","uploadPost","owner","likes","dislikes","_x","_uploadPost","apply","arguments","_asyncToGenerator","response","fetch","method","headers","body","JSON","stringify","pickImage","_pickImage","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","canceled","base64Code","readAsStringAsync","assets","uri","encoding","EncodingType","Base64","log","children","header","View","style","styles","TextInput","textInput","placeholder","onChangeText","multiline","maxLength","Button","onpres","TouchableHighlight","button","onPress","Text","buttonText","StyleSheet","create","backgroundColor","neutral","width","alignSelf","borderRadius","padding","dark","color","textcolor","margin","flexDirection","justifyContent","height"],"sources":["C:/Users/alexi/Documents/react-native/Instagram/src/frontend/components/Create.js"],"sourcesContent":["import { StyleSheet, Text, TextInput, TouchableHighlight, Button, View } from \"react-native\";\r\nimport { palette } from \"../styles/global-styles\";\r\nimport Header from \"./Header\";\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport * as FileSystem from 'expo-file-system';\r\n\r\nfunction Create() {\r\n\tconst [title, setTitle] = useState(\"\");\r\n\tconst [description, setDescription] = useState(\"\");\r\n\tconst [image, setImage] = useState(null);\r\n\r\n\tfunction handleOnChangeTitle(title) {\r\n\t\tsetTitle(title)\r\n\t}\r\n\tfunction handleOnChangeDescription(description) {\r\n\t\tsetDescription(description)\r\n\t}\r\n\tfunction handleOnSubmit() {\r\n\t\tif (title == \"\" || description == \"\") {\r\n\t\t\tconsole.warn(\"required fields missing ...\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst post = createPost();\r\n\t\tuploadPost(post);\r\n\t}\r\n\tfunction createPost() {\r\n\t\treturn {\r\n\t\t\ttitle: title,\r\n\t\t\tdescription: description,\r\n\t\t\towner: \"owner\",\r\n\t\t\tlikes: 0,\r\n\t\t\tdislikes: 0,\r\n\t\t}\r\n\t}\r\n\tasync function uploadPost(post) {\r\n\t\tconst response = await fetch(\"http://192.168.1.72:5000/uploadpost\", { \r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: { 'Content-Type': 'application/json' },\r\n\t\t\tbody: JSON.stringify(post) \r\n\t\t});\r\n\t}\r\n\r\n\tasync function pickImage () {\r\n\t\t// No permissions request is necessary for launching the image library\r\n\t\tlet result = await ImagePicker.launchImageLibraryAsync({\r\n\t\t\t\tmediaTypes: ImagePicker.MediaTypeOptions.All,\r\n\t\t\t\tallowsEditing: true,\r\n\t\t\t\taspect: [4, 3],\r\n\t\t\t\tquality: 1,\r\n\t\t});\r\n  \r\n\t  if (!result.canceled) {\r\n\t\t\tconst base64Code = await FileSystem.readAsStringAsync(result.assets[0].uri, {\r\n\t\t\t\tencoding: FileSystem.EncodingType.Base64,\r\n\t\t\t});\r\n\t\t\tsetImage(result.assets[0].uri);\r\n\t\t\tconsole.log(base64Code); // The base64 code of the selected image\r\n\t  }\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Header header=\"Create\" />\r\n\t\t\t<View style={styles.body}>\r\n\t\t\t\t<TextInput style={styles.textInput} \r\n\t\t\t\t\tplaceholder=\"Title ...\"\r\n\t\t\t\t\tonChangeText={handleOnChangeTitle}></TextInput>\r\n\t\t\t\t<TextInput style={[styles.textInput, styles.description]}\r\n\t\t\t\t\tplaceholder=\"Description ...\" \r\n\t\t\t\t\tmultiline={true} \r\n\t\t\t\t\tmaxLength={700} \r\n\t\t\t\t\tonChangeText={handleOnChangeDescription}/>\r\n\t\t\t\t<Button title=\"Pick an image from camera roll\" onpres />\r\n\r\n\t\t\t\t<TouchableHighlight style={styles.button} onPress={handleOnSubmit}>\r\n\t\t\t\t\t<Text style={styles.buttonText}>Post</Text>\r\n\t\t\t\t</TouchableHighlight>\r\n\t\t\t</View>\r\n\t\t</>)\r\n}\r\nconst styles = StyleSheet.create({\r\n\tbody: {\r\n\t\tbackgroundColor: palette.neutral,\r\n\t\twidth: '90%',\r\n\t\talignSelf: 'center',\r\n\t},\r\n\ttextInput: {\r\n\t\tborderRadius: 10,\r\n\t\tpadding: 6,\r\n\t\tbackgroundColor: palette.dark,\r\n\t\tcolor: palette.textcolor,\r\n\t\tmargin: 5,\r\n\t},\r\n\tdescription: {\r\n\t\tflexDirection: 'column',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\theight: 200,\r\n\t},\r\n\tbutton: {\r\n\t\tbackgroundColor: 'red',\r\n\t\tborderRadius: 10,\r\n\t},\r\n\tbuttonText: {\r\n\t\tpadding: 2,\r\n\t}\r\n})\r\nexport default Create;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}