{"ast":null,"code":"import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import{EventEmitter,UnavailabilityError}from'expo-modules-core';import Platform from\"react-native-web/dist/exports/Platform\";import{v4 as uuidv4}from'uuid';import ExponentFileSystem from\"./ExponentFileSystem\";import{EncodingType,FileSystemSessionType,FileSystemUploadType}from\"./FileSystem.types\";if(!ExponentFileSystem){console.warn(\"No native ExponentFileSystem module found, are you sure the expo-file-system's module is linked properly?\");}var _unused=new EventEmitter(ExponentFileSystem);export{EncodingType,FileSystemSessionType,FileSystemUploadType};function normalizeEndingSlash(p){if(p!=null){return p.replace(/\\/*$/,'')+'/';}return null;}export var documentDirectory=normalizeEndingSlash(ExponentFileSystem.documentDirectory);export var cacheDirectory=normalizeEndingSlash(ExponentFileSystem.cacheDirectory);var bundledAssets=ExponentFileSystem.bundledAssets,bundleDirectory=ExponentFileSystem.bundleDirectory;export{bundledAssets,bundleDirectory};export function getInfoAsync(_x){return _getInfoAsync.apply(this,arguments);}function _getInfoAsync(){_getInfoAsync=_asyncToGenerator(function*(fileUri){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!ExponentFileSystem.getInfoAsync){throw new UnavailabilityError('expo-file-system','getInfoAsync');}return yield ExponentFileSystem.getInfoAsync(fileUri,options);});return _getInfoAsync.apply(this,arguments);}export function readAsStringAsync(_x2,_x3){return _readAsStringAsync.apply(this,arguments);}function _readAsStringAsync(){_readAsStringAsync=_asyncToGenerator(function*(fileUri,options){if(!ExponentFileSystem.readAsStringAsync){throw new UnavailabilityError('expo-file-system','readAsStringAsync');}return yield ExponentFileSystem.readAsStringAsync(fileUri,options||{});});return _readAsStringAsync.apply(this,arguments);}export function getContentUriAsync(_x4){return _getContentUriAsync.apply(this,arguments);}function _getContentUriAsync(){_getContentUriAsync=_asyncToGenerator(function*(fileUri){if(Platform.OS==='android'){if(!ExponentFileSystem.getContentUriAsync){throw new UnavailabilityError('expo-file-system','getContentUriAsync');}return yield ExponentFileSystem.getContentUriAsync(fileUri);}else{return new Promise(function(resolve,reject){resolve(fileUri);});}});return _getContentUriAsync.apply(this,arguments);}export function writeAsStringAsync(_x5,_x6){return _writeAsStringAsync.apply(this,arguments);}function _writeAsStringAsync(){_writeAsStringAsync=_asyncToGenerator(function*(fileUri,contents){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!ExponentFileSystem.writeAsStringAsync){throw new UnavailabilityError('expo-file-system','writeAsStringAsync');}return yield ExponentFileSystem.writeAsStringAsync(fileUri,contents,options);});return _writeAsStringAsync.apply(this,arguments);}export function deleteAsync(_x7){return _deleteAsync.apply(this,arguments);}function _deleteAsync(){_deleteAsync=_asyncToGenerator(function*(fileUri){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!ExponentFileSystem.deleteAsync){throw new UnavailabilityError('expo-file-system','deleteAsync');}return yield ExponentFileSystem.deleteAsync(fileUri,options);});return _deleteAsync.apply(this,arguments);}export function deleteLegacyDocumentDirectoryAndroid(){return _deleteLegacyDocumentDirectoryAndroid.apply(this,arguments);}function _deleteLegacyDocumentDirectoryAndroid(){_deleteLegacyDocumentDirectoryAndroid=_asyncToGenerator(function*(){if(Platform.OS!=='android'||documentDirectory==null){return;}var legacyDocumentDirectory=documentDirectory+\"ExperienceData/\";return yield deleteAsync(legacyDocumentDirectory,{idempotent:true});});return _deleteLegacyDocumentDirectoryAndroid.apply(this,arguments);}export function moveAsync(_x8){return _moveAsync.apply(this,arguments);}function _moveAsync(){_moveAsync=_asyncToGenerator(function*(options){if(!ExponentFileSystem.moveAsync){throw new UnavailabilityError('expo-file-system','moveAsync');}return yield ExponentFileSystem.moveAsync(options);});return _moveAsync.apply(this,arguments);}export function copyAsync(_x9){return _copyAsync.apply(this,arguments);}function _copyAsync(){_copyAsync=_asyncToGenerator(function*(options){if(!ExponentFileSystem.copyAsync){throw new UnavailabilityError('expo-file-system','copyAsync');}return yield ExponentFileSystem.copyAsync(options);});return _copyAsync.apply(this,arguments);}export function makeDirectoryAsync(_x10){return _makeDirectoryAsync.apply(this,arguments);}function _makeDirectoryAsync(){_makeDirectoryAsync=_asyncToGenerator(function*(fileUri){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!ExponentFileSystem.makeDirectoryAsync){throw new UnavailabilityError('expo-file-system','makeDirectoryAsync');}return yield ExponentFileSystem.makeDirectoryAsync(fileUri,options);});return _makeDirectoryAsync.apply(this,arguments);}export function readDirectoryAsync(_x11){return _readDirectoryAsync.apply(this,arguments);}function _readDirectoryAsync(){_readDirectoryAsync=_asyncToGenerator(function*(fileUri){if(!ExponentFileSystem.readDirectoryAsync){throw new UnavailabilityError('expo-file-system','readDirectoryAsync');}return yield ExponentFileSystem.readDirectoryAsync(fileUri,{});});return _readDirectoryAsync.apply(this,arguments);}export function getFreeDiskStorageAsync(){return _getFreeDiskStorageAsync.apply(this,arguments);}function _getFreeDiskStorageAsync(){_getFreeDiskStorageAsync=_asyncToGenerator(function*(){if(!ExponentFileSystem.getFreeDiskStorageAsync){throw new UnavailabilityError('expo-file-system','getFreeDiskStorageAsync');}return yield ExponentFileSystem.getFreeDiskStorageAsync();});return _getFreeDiskStorageAsync.apply(this,arguments);}export function getTotalDiskCapacityAsync(){return _getTotalDiskCapacityAsync.apply(this,arguments);}function _getTotalDiskCapacityAsync(){_getTotalDiskCapacityAsync=_asyncToGenerator(function*(){if(!ExponentFileSystem.getTotalDiskCapacityAsync){throw new UnavailabilityError('expo-file-system','getTotalDiskCapacityAsync');}return yield ExponentFileSystem.getTotalDiskCapacityAsync();});return _getTotalDiskCapacityAsync.apply(this,arguments);}export function downloadAsync(_x12,_x13){return _downloadAsync.apply(this,arguments);}function _downloadAsync(){_downloadAsync=_asyncToGenerator(function*(uri,fileUri){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!ExponentFileSystem.downloadAsync){throw new UnavailabilityError('expo-file-system','downloadAsync');}return yield ExponentFileSystem.downloadAsync(uri,fileUri,_objectSpread({sessionType:FileSystemSessionType.BACKGROUND},options));});return _downloadAsync.apply(this,arguments);}export function uploadAsync(_x14,_x15){return _uploadAsync.apply(this,arguments);}function _uploadAsync(){_uploadAsync=_asyncToGenerator(function*(url,fileUri){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!ExponentFileSystem.uploadAsync){throw new UnavailabilityError('expo-file-system','uploadAsync');}return yield ExponentFileSystem.uploadAsync(url,fileUri,_objectSpread(_objectSpread({sessionType:FileSystemSessionType.BACKGROUND,uploadType:FileSystemUploadType.BINARY_CONTENT},options),{},{httpMethod:(options.httpMethod||'POST').toUpperCase()}));});return _uploadAsync.apply(this,arguments);}export function createDownloadResumable(uri,fileUri,options,callback,resumeData){return new DownloadResumable(uri,fileUri,options,callback,resumeData);}export function createUploadTask(url,fileUri,options,callback){return new UploadTask(url,fileUri,options,callback);}export var FileSystemCancellableNetworkTask=function(){function FileSystemCancellableNetworkTask(){_classCallCheck(this,FileSystemCancellableNetworkTask);this._uuid=uuidv4();this.taskWasCanceled=false;this.emitter=new EventEmitter(ExponentFileSystem);}_createClass(FileSystemCancellableNetworkTask,[{key:\"cancelAsync\",value:function(){var _cancelAsync=_asyncToGenerator(function*(){if(!ExponentFileSystem.networkTaskCancelAsync){throw new UnavailabilityError('expo-file-system','networkTaskCancelAsync');}this.removeSubscription();this.taskWasCanceled=true;return yield ExponentFileSystem.networkTaskCancelAsync(this.uuid);});function cancelAsync(){return _cancelAsync.apply(this,arguments);}return cancelAsync;}()},{key:\"isTaskCancelled\",value:function isTaskCancelled(){if(this.taskWasCanceled){console.warn('This task was already canceled.');return true;}return false;}},{key:\"uuid\",get:function get(){return this._uuid;}},{key:\"addSubscription\",value:function addSubscription(){var _this=this;if(this.subscription){return;}this.subscription=this.emitter.addListener(this.getEventName(),function(event){if(event.uuid===_this.uuid){var callback=_this.getCallback();if(callback){callback(event.data);}}});}},{key:\"removeSubscription\",value:function removeSubscription(){if(!this.subscription){return;}this.emitter.removeSubscription(this.subscription);this.subscription=null;}}]);return FileSystemCancellableNetworkTask;}();export var UploadTask=function(_FileSystemCancellabl){_inherits(UploadTask,_FileSystemCancellabl);var _super=_createSuper(UploadTask);function UploadTask(url,fileUri,options,callback){var _options$httpMethod;var _this2;_classCallCheck(this,UploadTask);_this2=_super.call(this);_this2.url=url;_this2.fileUri=fileUri;_this2.callback=callback;var httpMethod=(options==null?void 0:(_options$httpMethod=options.httpMethod)==null?void 0:_options$httpMethod.toUpperCase())||'POST';_this2.options=_objectSpread(_objectSpread({sessionType:FileSystemSessionType.BACKGROUND,uploadType:FileSystemUploadType.BINARY_CONTENT},options),{},{httpMethod:httpMethod});return _this2;}_createClass(UploadTask,[{key:\"getEventName\",value:function getEventName(){return'expo-file-system.uploadProgress';}},{key:\"getCallback\",value:function getCallback(){return this.callback;}},{key:\"uploadAsync\",value:function(){var _uploadAsync2=_asyncToGenerator(function*(){if(!ExponentFileSystem.uploadTaskStartAsync){throw new UnavailabilityError('expo-file-system','uploadTaskStartAsync');}if(this.isTaskCancelled()){return;}this.addSubscription();var result=yield ExponentFileSystem.uploadTaskStartAsync(this.url,this.fileUri,this.uuid,this.options);this.removeSubscription();return result;});function uploadAsync(){return _uploadAsync2.apply(this,arguments);}return uploadAsync;}()}]);return UploadTask;}(FileSystemCancellableNetworkTask);export var DownloadResumable=function(_FileSystemCancellabl2){_inherits(DownloadResumable,_FileSystemCancellabl2);var _super2=_createSuper(DownloadResumable);function DownloadResumable(url,_fileUri){var _this3;var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var callback=arguments.length>3?arguments[3]:undefined;var resumeData=arguments.length>4?arguments[4]:undefined;_classCallCheck(this,DownloadResumable);_this3=_super2.call(this);_this3.url=url;_this3._fileUri=_fileUri;_this3.options=options;_this3.callback=callback;_this3.resumeData=resumeData;return _this3;}_createClass(DownloadResumable,[{key:\"fileUri\",get:function get(){return this._fileUri;}},{key:\"getEventName\",value:function getEventName(){return'expo-file-system.downloadProgress';}},{key:\"getCallback\",value:function getCallback(){return this.callback;}},{key:\"downloadAsync\",value:function(){var _downloadAsync2=_asyncToGenerator(function*(){if(!ExponentFileSystem.downloadResumableStartAsync){throw new UnavailabilityError('expo-file-system','downloadResumableStartAsync');}if(this.isTaskCancelled()){return;}this.addSubscription();return yield ExponentFileSystem.downloadResumableStartAsync(this.url,this._fileUri,this.uuid,this.options,this.resumeData);});function downloadAsync(){return _downloadAsync2.apply(this,arguments);}return downloadAsync;}()},{key:\"pauseAsync\",value:function(){var _pauseAsync=_asyncToGenerator(function*(){if(!ExponentFileSystem.downloadResumablePauseAsync){throw new UnavailabilityError('expo-file-system','downloadResumablePauseAsync');}if(this.isTaskCancelled()){return{fileUri:this._fileUri,options:this.options,url:this.url};}var pauseResult=yield ExponentFileSystem.downloadResumablePauseAsync(this.uuid);this.removeSubscription();if(pauseResult){this.resumeData=pauseResult.resumeData;return this.savable();}else{throw new Error('Unable to generate a savable pause state');}});function pauseAsync(){return _pauseAsync.apply(this,arguments);}return pauseAsync;}()},{key:\"resumeAsync\",value:function(){var _resumeAsync=_asyncToGenerator(function*(){if(!ExponentFileSystem.downloadResumableStartAsync){throw new UnavailabilityError('expo-file-system','downloadResumableStartAsync');}if(this.isTaskCancelled()){return;}this.addSubscription();return yield ExponentFileSystem.downloadResumableStartAsync(this.url,this.fileUri,this.uuid,this.options,this.resumeData);});function resumeAsync(){return _resumeAsync.apply(this,arguments);}return resumeAsync;}()},{key:\"savable\",value:function savable(){return{url:this.url,fileUri:this.fileUri,options:this.options,resumeData:this.resumeData};}}]);return DownloadResumable;}(FileSystemCancellableNetworkTask);var baseReadAsStringAsync=readAsStringAsync;var baseWriteAsStringAsync=writeAsStringAsync;var baseDeleteAsync=deleteAsync;var baseMoveAsync=moveAsync;var baseCopyAsync=copyAsync;export var StorageAccessFramework;(function(StorageAccessFramework){function getUriForDirectoryInRoot(folderName){return\"content://com.android.externalstorage.documents/tree/primary:\"+folderName+\"/document/primary:\"+folderName;}StorageAccessFramework.getUriForDirectoryInRoot=getUriForDirectoryInRoot;function requestDirectoryPermissionsAsync(){return _requestDirectoryPermissionsAsync.apply(this,arguments);}function _requestDirectoryPermissionsAsync(){_requestDirectoryPermissionsAsync=_asyncToGenerator(function*(){var initialFileUrl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!ExponentFileSystem.requestDirectoryPermissionsAsync){throw new UnavailabilityError('expo-file-system','StorageAccessFramework.requestDirectoryPermissionsAsync');}return yield ExponentFileSystem.requestDirectoryPermissionsAsync(initialFileUrl);});return _requestDirectoryPermissionsAsync.apply(this,arguments);}StorageAccessFramework.requestDirectoryPermissionsAsync=requestDirectoryPermissionsAsync;function readDirectoryAsync(_x16){return _readDirectoryAsync2.apply(this,arguments);}function _readDirectoryAsync2(){_readDirectoryAsync2=_asyncToGenerator(function*(dirUri){if(!ExponentFileSystem.readSAFDirectoryAsync){throw new UnavailabilityError('expo-file-system','StorageAccessFramework.readDirectoryAsync');}return yield ExponentFileSystem.readSAFDirectoryAsync(dirUri,{});});return _readDirectoryAsync2.apply(this,arguments);}StorageAccessFramework.readDirectoryAsync=readDirectoryAsync;function makeDirectoryAsync(_x17,_x18){return _makeDirectoryAsync2.apply(this,arguments);}function _makeDirectoryAsync2(){_makeDirectoryAsync2=_asyncToGenerator(function*(parentUri,dirName){if(!ExponentFileSystem.makeSAFDirectoryAsync){throw new UnavailabilityError('expo-file-system','StorageAccessFramework.makeDirectoryAsync');}return yield ExponentFileSystem.makeSAFDirectoryAsync(parentUri,dirName);});return _makeDirectoryAsync2.apply(this,arguments);}StorageAccessFramework.makeDirectoryAsync=makeDirectoryAsync;function createFileAsync(_x19,_x20,_x21){return _createFileAsync.apply(this,arguments);}function _createFileAsync(){_createFileAsync=_asyncToGenerator(function*(parentUri,fileName,mimeType){if(!ExponentFileSystem.createSAFFileAsync){throw new UnavailabilityError('expo-file-system','StorageAccessFramework.createFileAsync');}return yield ExponentFileSystem.createSAFFileAsync(parentUri,fileName,mimeType);});return _createFileAsync.apply(this,arguments);}StorageAccessFramework.createFileAsync=createFileAsync;StorageAccessFramework.writeAsStringAsync=baseWriteAsStringAsync;StorageAccessFramework.readAsStringAsync=baseReadAsStringAsync;StorageAccessFramework.deleteAsync=baseDeleteAsync;StorageAccessFramework.moveAsync=baseMoveAsync;StorageAccessFramework.copyAsync=baseCopyAsync;})(StorageAccessFramework||(StorageAccessFramework={}));","map":{"version":3,"sources":["../src/FileSystem.ts"],"names":[],"mappings":"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","sourcesContent":["import { EventEmitter, Subscription, UnavailabilityError } from 'expo-modules-core';\nimport { Platform } from 'react-native';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport ExponentFileSystem from './ExponentFileSystem';\nimport {\n  DownloadOptions,\n  DownloadPauseState,\n  DownloadProgressCallback,\n  FileSystemNetworkTaskProgressCallback,\n  DownloadProgressData,\n  UploadProgressData,\n  DownloadResult,\n  EncodingType,\n  FileInfo,\n  FileSystemAcceptedUploadHttpMethod,\n  FileSystemDownloadResult,\n  FileSystemRequestDirectoryPermissionsResult,\n  FileSystemSessionType,\n  FileSystemUploadOptions,\n  FileSystemUploadResult,\n  FileSystemUploadType,\n  ProgressEvent,\n  ReadingOptions,\n  WritingOptions,\n} from './FileSystem.types';\n\nif (!ExponentFileSystem) {\n  console.warn(\n    \"No native ExponentFileSystem module found, are you sure the expo-file-system's module is linked properly?\"\n  );\n}\n// Prevent webpack from pruning this.\nconst _unused = new EventEmitter(ExponentFileSystem); // eslint-disable-line\n\nexport {\n  DownloadOptions,\n  DownloadPauseState,\n  DownloadProgressCallback,\n  DownloadProgressData,\n  DownloadResult,\n  EncodingType,\n  FileInfo,\n  FileSystemDownloadResult,\n  FileSystemRequestDirectoryPermissionsResult,\n  FileSystemAcceptedUploadHttpMethod,\n  FileSystemSessionType,\n  FileSystemUploadOptions,\n  FileSystemUploadResult,\n  FileSystemUploadType,\n  FileSystemNetworkTaskProgressCallback,\n  ReadingOptions,\n  WritingOptions,\n};\n\nfunction normalizeEndingSlash(p: string | null): string | null {\n  if (p != null) {\n    return p.replace(/\\/*$/, '') + '/';\n  }\n  return null;\n}\n\nexport const documentDirectory = normalizeEndingSlash(ExponentFileSystem.documentDirectory);\nexport const cacheDirectory = normalizeEndingSlash(ExponentFileSystem.cacheDirectory);\n\nexport const { bundledAssets, bundleDirectory } = ExponentFileSystem;\n\nexport async function getInfoAsync(\n  fileUri: string,\n  options: { md5?: boolean; size?: boolean } = {}\n): Promise<FileInfo> {\n  if (!ExponentFileSystem.getInfoAsync) {\n    throw new UnavailabilityError('expo-file-system', 'getInfoAsync');\n  }\n  return await ExponentFileSystem.getInfoAsync(fileUri, options);\n}\n\nexport async function readAsStringAsync(\n  fileUri: string,\n  options?: ReadingOptions\n): Promise<string> {\n  if (!ExponentFileSystem.readAsStringAsync) {\n    throw new UnavailabilityError('expo-file-system', 'readAsStringAsync');\n  }\n  return await ExponentFileSystem.readAsStringAsync(fileUri, options || {});\n}\n\nexport async function getContentUriAsync(fileUri: string): Promise<string> {\n  if (Platform.OS === 'android') {\n    if (!ExponentFileSystem.getContentUriAsync) {\n      throw new UnavailabilityError('expo-file-system', 'getContentUriAsync');\n    }\n    return await ExponentFileSystem.getContentUriAsync(fileUri);\n  } else {\n    return new Promise(function (resolve, reject) {\n      resolve(fileUri);\n    });\n  }\n}\n\nexport async function writeAsStringAsync(\n  fileUri: string,\n  contents: string,\n  options: WritingOptions = {}\n): Promise<void> {\n  if (!ExponentFileSystem.writeAsStringAsync) {\n    throw new UnavailabilityError('expo-file-system', 'writeAsStringAsync');\n  }\n  return await ExponentFileSystem.writeAsStringAsync(fileUri, contents, options);\n}\n\nexport async function deleteAsync(\n  fileUri: string,\n  options: { idempotent?: boolean } = {}\n): Promise<void> {\n  if (!ExponentFileSystem.deleteAsync) {\n    throw new UnavailabilityError('expo-file-system', 'deleteAsync');\n  }\n  return await ExponentFileSystem.deleteAsync(fileUri, options);\n}\n\nexport async function deleteLegacyDocumentDirectoryAndroid(): Promise<void> {\n  if (Platform.OS !== 'android' || documentDirectory == null) {\n    return;\n  }\n  const legacyDocumentDirectory = `${documentDirectory}ExperienceData/`;\n  return await deleteAsync(legacyDocumentDirectory, { idempotent: true });\n}\n\nexport async function moveAsync(options: { from: string; to: string }): Promise<void> {\n  if (!ExponentFileSystem.moveAsync) {\n    throw new UnavailabilityError('expo-file-system', 'moveAsync');\n  }\n  return await ExponentFileSystem.moveAsync(options);\n}\n\nexport async function copyAsync(options: { from: string; to: string }): Promise<void> {\n  if (!ExponentFileSystem.copyAsync) {\n    throw new UnavailabilityError('expo-file-system', 'copyAsync');\n  }\n  return await ExponentFileSystem.copyAsync(options);\n}\n\nexport async function makeDirectoryAsync(\n  fileUri: string,\n  options: { intermediates?: boolean } = {}\n): Promise<void> {\n  if (!ExponentFileSystem.makeDirectoryAsync) {\n    throw new UnavailabilityError('expo-file-system', 'makeDirectoryAsync');\n  }\n  return await ExponentFileSystem.makeDirectoryAsync(fileUri, options);\n}\n\nexport async function readDirectoryAsync(fileUri: string): Promise<string[]> {\n  if (!ExponentFileSystem.readDirectoryAsync) {\n    throw new UnavailabilityError('expo-file-system', 'readDirectoryAsync');\n  }\n  return await ExponentFileSystem.readDirectoryAsync(fileUri, {});\n}\n\nexport async function getFreeDiskStorageAsync(): Promise<number> {\n  if (!ExponentFileSystem.getFreeDiskStorageAsync) {\n    throw new UnavailabilityError('expo-file-system', 'getFreeDiskStorageAsync');\n  }\n  return await ExponentFileSystem.getFreeDiskStorageAsync();\n}\n\nexport async function getTotalDiskCapacityAsync(): Promise<number> {\n  if (!ExponentFileSystem.getTotalDiskCapacityAsync) {\n    throw new UnavailabilityError('expo-file-system', 'getTotalDiskCapacityAsync');\n  }\n  return await ExponentFileSystem.getTotalDiskCapacityAsync();\n}\n\nexport async function downloadAsync(\n  uri: string,\n  fileUri: string,\n  options: DownloadOptions = {}\n): Promise<FileSystemDownloadResult> {\n  if (!ExponentFileSystem.downloadAsync) {\n    throw new UnavailabilityError('expo-file-system', 'downloadAsync');\n  }\n\n  return await ExponentFileSystem.downloadAsync(uri, fileUri, {\n    sessionType: FileSystemSessionType.BACKGROUND,\n    ...options,\n  });\n}\n\nexport async function uploadAsync(\n  url: string,\n  fileUri: string,\n  options: FileSystemUploadOptions = {}\n): Promise<FileSystemUploadResult> {\n  if (!ExponentFileSystem.uploadAsync) {\n    throw new UnavailabilityError('expo-file-system', 'uploadAsync');\n  }\n\n  return await ExponentFileSystem.uploadAsync(url, fileUri, {\n    sessionType: FileSystemSessionType.BACKGROUND,\n    uploadType: FileSystemUploadType.BINARY_CONTENT,\n    ...options,\n    httpMethod: (options.httpMethod || 'POST').toUpperCase(),\n  });\n}\n\nexport function createDownloadResumable(\n  uri: string,\n  fileUri: string,\n  options?: DownloadOptions,\n  callback?: FileSystemNetworkTaskProgressCallback<DownloadProgressData>,\n  resumeData?: string\n): DownloadResumable {\n  return new DownloadResumable(uri, fileUri, options, callback, resumeData);\n}\n\nexport function createUploadTask(\n  url: string,\n  fileUri: string,\n  options?: FileSystemUploadOptions,\n  callback?: FileSystemNetworkTaskProgressCallback<UploadProgressData>\n): UploadTask {\n  return new UploadTask(url, fileUri, options, callback);\n}\n\nexport abstract class FileSystemCancellableNetworkTask<\n  T extends DownloadProgressData | UploadProgressData\n> {\n  private _uuid = uuidv4();\n  protected taskWasCanceled = false;\n  private emitter = new EventEmitter(ExponentFileSystem);\n  private subscription?: Subscription | null;\n\n  public async cancelAsync(): Promise<void> {\n    if (!ExponentFileSystem.networkTaskCancelAsync) {\n      throw new UnavailabilityError('expo-file-system', 'networkTaskCancelAsync');\n    }\n\n    this.removeSubscription();\n    this.taskWasCanceled = true;\n    return await ExponentFileSystem.networkTaskCancelAsync(this.uuid);\n  }\n\n  protected isTaskCancelled(): boolean {\n    if (this.taskWasCanceled) {\n      console.warn('This task was already canceled.');\n      return true;\n    }\n\n    return false;\n  }\n\n  protected get uuid(): string {\n    return this._uuid;\n  }\n\n  protected abstract getEventName(): string;\n\n  protected abstract getCallback(): FileSystemNetworkTaskProgressCallback<T> | undefined;\n\n  protected addSubscription() {\n    if (this.subscription) {\n      return;\n    }\n\n    this.subscription = this.emitter.addListener(this.getEventName(), (event: ProgressEvent<T>) => {\n      if (event.uuid === this.uuid) {\n        const callback = this.getCallback();\n        if (callback) {\n          callback(event.data);\n        }\n      }\n    });\n  }\n\n  protected removeSubscription() {\n    if (!this.subscription) {\n      return;\n    }\n    this.emitter.removeSubscription(this.subscription);\n    this.subscription = null;\n  }\n}\n\nexport class UploadTask extends FileSystemCancellableNetworkTask<UploadProgressData> {\n  private options: FileSystemUploadOptions;\n\n  constructor(\n    private url: string,\n    private fileUri: string,\n    options?: FileSystemUploadOptions,\n    private callback?: FileSystemNetworkTaskProgressCallback<UploadProgressData>\n  ) {\n    super();\n\n    const httpMethod = (options?.httpMethod?.toUpperCase() ||\n      'POST') as FileSystemAcceptedUploadHttpMethod;\n\n    this.options = {\n      sessionType: FileSystemSessionType.BACKGROUND,\n      uploadType: FileSystemUploadType.BINARY_CONTENT,\n      ...options,\n      httpMethod,\n    };\n  }\n\n  protected getEventName(): string {\n    return 'expo-file-system.uploadProgress';\n  }\n  protected getCallback(): FileSystemNetworkTaskProgressCallback<UploadProgressData> | undefined {\n    return this.callback;\n  }\n\n  public async uploadAsync(): Promise<FileSystemUploadResult | undefined> {\n    if (!ExponentFileSystem.uploadTaskStartAsync) {\n      throw new UnavailabilityError('expo-file-system', 'uploadTaskStartAsync');\n    }\n\n    if (this.isTaskCancelled()) {\n      return;\n    }\n\n    this.addSubscription();\n    const result = await ExponentFileSystem.uploadTaskStartAsync(\n      this.url,\n      this.fileUri,\n      this.uuid,\n      this.options\n    );\n    this.removeSubscription();\n\n    return result;\n  }\n}\n\nexport class DownloadResumable extends FileSystemCancellableNetworkTask<DownloadProgressData> {\n  constructor(\n    private url: string,\n    private _fileUri: string,\n    private options: DownloadOptions = {},\n    private callback?: FileSystemNetworkTaskProgressCallback<DownloadProgressData>,\n    private resumeData?: string\n  ) {\n    super();\n  }\n\n  public get fileUri(): string {\n    return this._fileUri;\n  }\n\n  protected getEventName(): string {\n    return 'expo-file-system.downloadProgress';\n  }\n\n  protected getCallback(): FileSystemNetworkTaskProgressCallback<DownloadProgressData> | undefined {\n    return this.callback;\n  }\n\n  async downloadAsync(): Promise<FileSystemDownloadResult | undefined> {\n    if (!ExponentFileSystem.downloadResumableStartAsync) {\n      throw new UnavailabilityError('expo-file-system', 'downloadResumableStartAsync');\n    }\n\n    if (this.isTaskCancelled()) {\n      return;\n    }\n\n    this.addSubscription();\n    return await ExponentFileSystem.downloadResumableStartAsync(\n      this.url,\n      this._fileUri,\n      this.uuid,\n      this.options,\n      this.resumeData\n    );\n  }\n\n  async pauseAsync(): Promise<DownloadPauseState> {\n    if (!ExponentFileSystem.downloadResumablePauseAsync) {\n      throw new UnavailabilityError('expo-file-system', 'downloadResumablePauseAsync');\n    }\n\n    if (this.isTaskCancelled()) {\n      return {\n        fileUri: this._fileUri,\n        options: this.options,\n        url: this.url,\n      };\n    }\n\n    const pauseResult = await ExponentFileSystem.downloadResumablePauseAsync(this.uuid);\n    this.removeSubscription();\n    if (pauseResult) {\n      this.resumeData = pauseResult.resumeData;\n      return this.savable();\n    } else {\n      throw new Error('Unable to generate a savable pause state');\n    }\n  }\n\n  async resumeAsync(): Promise<FileSystemDownloadResult | undefined> {\n    if (!ExponentFileSystem.downloadResumableStartAsync) {\n      throw new UnavailabilityError('expo-file-system', 'downloadResumableStartAsync');\n    }\n\n    if (this.isTaskCancelled()) {\n      return;\n    }\n\n    this.addSubscription();\n    return await ExponentFileSystem.downloadResumableStartAsync(\n      this.url,\n      this.fileUri,\n      this.uuid,\n      this.options,\n      this.resumeData\n    );\n  }\n\n  savable(): DownloadPauseState {\n    return {\n      url: this.url,\n      fileUri: this.fileUri,\n      options: this.options,\n      resumeData: this.resumeData,\n    };\n  }\n}\n\nconst baseReadAsStringAsync = readAsStringAsync;\nconst baseWriteAsStringAsync = writeAsStringAsync;\nconst baseDeleteAsync = deleteAsync;\nconst baseMoveAsync = moveAsync;\nconst baseCopyAsync = copyAsync;\n/**\n * Android only\n */\nexport namespace StorageAccessFramework {\n  export function getUriForDirectoryInRoot(folderName: string) {\n    return `content://com.android.externalstorage.documents/tree/primary:${folderName}/document/primary:${folderName}`;\n  }\n\n  export async function requestDirectoryPermissionsAsync(\n    initialFileUrl: string | null = null\n  ): Promise<FileSystemRequestDirectoryPermissionsResult> {\n    if (!ExponentFileSystem.requestDirectoryPermissionsAsync) {\n      throw new UnavailabilityError(\n        'expo-file-system',\n        'StorageAccessFramework.requestDirectoryPermissionsAsync'\n      );\n    }\n\n    return await ExponentFileSystem.requestDirectoryPermissionsAsync(initialFileUrl);\n  }\n\n  export async function readDirectoryAsync(dirUri: string): Promise<string[]> {\n    if (!ExponentFileSystem.readSAFDirectoryAsync) {\n      throw new UnavailabilityError(\n        'expo-file-system',\n        'StorageAccessFramework.readDirectoryAsync'\n      );\n    }\n    return await ExponentFileSystem.readSAFDirectoryAsync(dirUri, {});\n  }\n\n  export async function makeDirectoryAsync(parentUri: string, dirName: string): Promise<string> {\n    if (!ExponentFileSystem.makeSAFDirectoryAsync) {\n      throw new UnavailabilityError(\n        'expo-file-system',\n        'StorageAccessFramework.makeDirectoryAsync'\n      );\n    }\n    return await ExponentFileSystem.makeSAFDirectoryAsync(parentUri, dirName);\n  }\n\n  export async function createFileAsync(\n    parentUri: string,\n    fileName: string,\n    mimeType: string\n  ): Promise<string> {\n    if (!ExponentFileSystem.createSAFFileAsync) {\n      throw new UnavailabilityError('expo-file-system', 'StorageAccessFramework.createFileAsync');\n    }\n    return await ExponentFileSystem.createSAFFileAsync(parentUri, fileName, mimeType);\n  }\n\n  export const writeAsStringAsync = baseWriteAsStringAsync;\n  export const readAsStringAsync = baseReadAsStringAsync;\n  export const deleteAsync = baseDeleteAsync;\n  export const moveAsync = baseMoveAsync;\n  export const copyAsync = baseCopyAsync;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}