{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import View from\"react-native-web/dist/exports/View\";import Image from\"react-native-web/dist/exports/Image\";import{palette}from\"../styles/global-styles\";import*as ImagePicker from'expo-image-picker';import*as ImageManipulator from'expo-image-manipulator';import*as FileSystem from'expo-file-system';import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var ImportImage=function ImportImage(_ref){var setImage64=_ref.setImage64;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),backgroundImageUri=_useState2[0],setBackgroundImageUri=_useState2[1];function handleOnInsertImage(){return _handleOnInsertImage.apply(this,arguments);}function _handleOnInsertImage(){_handleOnInsertImage=_asyncToGenerator(function*(){var result=yield userSelectsImage();if(result.cancelled)return;result=yield uriTo800By800(result.uri);var base64=yield uriToBase64(result.uri);setImage64(base64);setBackgroundImageUri(result.uri);});return _handleOnInsertImage.apply(this,arguments);}function userSelectsImage(){return _userSelectsImage.apply(this,arguments);}function _userSelectsImage(){_userSelectsImage=_asyncToGenerator(function*(){return yield ImagePicker.launchImageLibraryAsync({mediaTypes:ImagePicker.MediaTypeOptions.Images,allowsEditing:true,aspect:[4,4],quality:1});});return _userSelectsImage.apply(this,arguments);}function uriTo800By800(_x){return _uriTo800By.apply(this,arguments);}function _uriTo800By(){_uriTo800By=_asyncToGenerator(function*(uri){return yield ImageManipulator.manipulateAsync(uri,[{resize:{height:1080,width:1080}}],{compress:1,format:ImageManipulator.SaveFormat.JPEG});});return _uriTo800By.apply(this,arguments);}function uriToBase64(_x2){return _uriToBase.apply(this,arguments);}function _uriToBase(){_uriToBase=_asyncToGenerator(function*(uri){return yield FileSystem.readAsStringAsync(uri,{encoding:FileSystem.EncodingType.Base64});});return _uriToBase.apply(this,arguments);}return _jsx(TouchableHighlight,{style:styles.touchable,onPress:handleOnInsertImage,children:!backgroundImageUri?_jsx(Image,{style:styles.imageBackground,source:require(\"./../../../assets/sprites/picture.png\")}):_jsx(Image,{style:styles.imageBackground,source:{uri:backgroundImageUri}})});};var styles=StyleSheet.create({touchable:{marginLeft:'20%',width:40,aspectRatio:1/1,borderRadius:10},buttonText:{color:palette.textcolor,fontSize:12,textAlign:'center',padding:2},imageBackground:{justifyContent:'center',borderRadius:10,overflow:'hidden',height:'100%',aspectRatio:1/1}});export default ImportImage;","map":{"version":3,"names":["palette","ImagePicker","ImageManipulator","FileSystem","useState","jsx","_jsx","ImportImage","_ref","setImage64","_useState","_useState2","_slicedToArray","backgroundImageUri","setBackgroundImageUri","handleOnInsertImage","_handleOnInsertImage","apply","arguments","_asyncToGenerator","result","userSelectsImage","cancelled","uriTo800By800","uri","base64","uriToBase64","_userSelectsImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","_x","_uriTo800By","manipulateAsync","resize","height","width","compress","format","SaveFormat","JPEG","_x2","_uriToBase","readAsStringAsync","encoding","EncodingType","Base64","TouchableHighlight","style","styles","touchable","onPress","children","Image","imageBackground","source","require","StyleSheet","create","marginLeft","aspectRatio","borderRadius","buttonText","color","textcolor","fontSize","textAlign","padding","justifyContent","overflow"],"sources":["C:/Users/alexi/Documents/react-native/reddit-clone/src/frontend/components/InsertImage.js"],"sourcesContent":["import { ImageBackground, StyleSheet, Text, TouchableHighlight, View, Image } from \"react-native\";\r\nimport { palette } from \"../styles/global-styles\";\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport * as ImageManipulator from 'expo-image-manipulator';\r\nimport * as FileSystem from 'expo-file-system';\r\nimport { useState } from \"react\";\r\n\r\nconst ImportImage = ({ setImage64 }) => {\r\n\tconst [backgroundImageUri, setBackgroundImageUri] = useState(null);\r\n\tasync function handleOnInsertImage() {\r\n\t\tlet result = await userSelectsImage();\t\t\t// User selects image\r\n\t\tif (result.cancelled) \t\t\t\t\t\t\t// If user cancels STOP\r\n\t\t\treturn;\t\t\t\t\t\r\n\t\tresult = await uriTo800By800(result.uri);\t\t// Convert image to 800 x 800\r\n\t\tconst base64 = await uriToBase64(result.uri);\t// Convert image to base64Code\r\n\t\tsetImage64(base64);\t\t\t\t\t\t\t\t// Store base64Code to parent\r\n\t\tsetBackgroundImageUri(result.uri);\r\n\t}\r\n\tasync function userSelectsImage() {\r\n\t\treturn await ImagePicker.launchImageLibraryAsync({\r\n\t\t\tmediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n\t\t\tallowsEditing: true,\r\n\t\t\taspect: [4, 4],\r\n\t\t\tquality: 1,\r\n\t\t});\r\n\t}\r\n\tasync function uriTo800By800(uri) {\r\n\t\treturn await ImageManipulator.manipulateAsync(\r\n\t\t\turi,\r\n\t\t\t[{ resize: { height:1080,  width:1080 } }],\r\n\t\t\t{ compress: 1, format: ImageManipulator.SaveFormat.JPEG },\r\n\t\t);\r\n\t}\r\n\tasync function uriToBase64(uri){\r\n\t\treturn await FileSystem.readAsStringAsync(uri, {\r\n\t\t\tencoding: FileSystem.EncodingType.Base64,\r\n\t\t});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<TouchableHighlight style={styles.touchable} onPress={handleOnInsertImage}>\r\n\t\t\t{!backgroundImageUri ? <Image style={styles.imageBackground} source={require('./../../../assets/sprites/picture.png')}/> \r\n\t\t\t: <Image style={styles.imageBackground} source={{ uri: backgroundImageUri}}/>}\r\n\t\t</TouchableHighlight>\r\n\t\t)\r\n}\r\nconst styles = StyleSheet.create({\r\n\ttouchable: {\r\n\t\tmarginLeft: '20%',\r\n\t\twidth: 40,\r\n\t\taspectRatio: 1/1,\r\n\t\tborderRadius: 10,\r\n\t},\r\n\tbuttonText: {\r\n\t\tcolor: palette.textcolor,\r\n\t\tfontSize: 12,\r\n\t\ttextAlign: 'center',\r\n\t\tpadding: 2,\r\n\t},\r\n\timageBackground: {\r\n\t\tjustifyContent: 'center',\r\n\t\tborderRadius: 10,\r\n\t\toverflow: 'hidden',\r\n\t\theight: '100%',\r\n\t\taspectRatio: 1/1,\r\n\t}\r\n})\r\nexport default ImportImage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}