{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import{EventEmitter}from'expo-modules-core';import React,{useEffect,useState,useRef,useMemo}from'react';import Animated from\"react-native-web/dist/exports/Animated\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import Platform from\"react-native-web/dist/exports/Platform\";import View from\"react-native-web/dist/exports/View\";import DevLoadingViewNativeModule from\"./DevLoadingViewNativeModule\";import{getInitialSafeArea}from\"./getInitialSafeArea\";export default function DevLoadingView(){var _useState=useState('Refreshing...'),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isDevLoading=_useState4[0],setIsDevLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAnimating=_useState6[0],setIsAnimating=_useState6[1];var translateY=useRef(new Animated.Value(0)).current;var emitter=useMemo(function(){try{return new EventEmitter(DevLoadingViewNativeModule);}catch(error){throw new Error('Failed to instantiate native emitter in `DevLoadingView` because the native module `DevLoadingView` is undefined: '+error.message);}},[]);useEffect(function(){if(!emitter)return;function handleShowMessage(event){setMessage(event.message);translateY.setValue(0);setIsDevLoading(true);}function handleHide(){setIsAnimating(true);setIsDevLoading(false);Animated.timing(translateY,{toValue:150,delay:1000,duration:350,useNativeDriver:Platform.OS!=='web'}).start(function(_ref){var finished=_ref.finished;if(finished){setIsAnimating(false);translateY.setValue(0);}});}var showMessageSubscription=emitter.addListener('devLoadingView:showMessage',handleShowMessage);var hideSubscription=emitter.addListener('devLoadingView:hide',handleHide);return function cleanup(){showMessageSubscription.remove();hideSubscription.remove();};},[translateY,emitter]);if(!isDevLoading&&!isAnimating){return null;}return React.createElement(Animated.View,{style:[styles.animatedContainer,{transform:[{translateY:translateY}]}],pointerEvents:\"none\"},React.createElement(View,{style:styles.banner},React.createElement(View,{style:styles.contentContainer},React.createElement(View,{style:{flexDirection:'row'}},React.createElement(Text,{style:styles.text},message)),React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:styles.subtitle},isDevLoading?'Using Fast Refresh':\"Don't see your changes? Reload the app\")))));}var styles=StyleSheet.create({animatedContainer:{position:'absolute',bottom:0,left:0,right:0,zIndex:42},banner:{flex:1,overflow:'visible',backgroundColor:'rgba(0,0,0,0.75)',paddingBottom:getInitialSafeArea().bottom},contentContainer:{flex:1,paddingTop:10,paddingBottom:5,alignItems:'center',justifyContent:'center',textAlign:'center'},text:{color:'#fff',fontSize:15},subtitle:{color:'rgba(255,255,255,0.8)'}});","map":{"version":3,"names":["EventEmitter","React","useEffect","useState","useRef","useMemo","Animated","StyleSheet","Text","Platform","View","DevLoadingViewNativeModule","getInitialSafeArea","DevLoadingView","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","isDevLoading","setIsDevLoading","_useState5","_useState6","isAnimating","setIsAnimating","translateY","Value","current","emitter","error","Error","handleShowMessage","event","setValue","handleHide","timing","toValue","delay","duration","useNativeDriver","OS","start","_ref","finished","showMessageSubscription","addListener","hideSubscription","cleanup","remove","createElement","style","styles","animatedContainer","transform","pointerEvents","banner","contentContainer","flexDirection","text","flex","subtitle","create","position","bottom","left","right","zIndex","overflow","backgroundColor","paddingBottom","paddingTop","alignItems","justifyContent","textAlign","color","fontSize"],"sources":["C:\\Users\\alexi\\Documents\\react-native\\reddit-clone\\node_modules\\expo\\src\\environment\\DevLoadingView.tsx"],"sourcesContent":["import { EventEmitter } from 'expo-modules-core';\nimport React, { useEffect, useState, useRef, useMemo } from 'react';\nimport { Animated, StyleSheet, Text, Platform, View } from 'react-native';\n\nimport DevLoadingViewNativeModule from './DevLoadingViewNativeModule';\nimport { getInitialSafeArea } from './getInitialSafeArea';\n\nexport default function DevLoadingView() {\n  const [message, setMessage] = useState('Refreshing...');\n  const [isDevLoading, setIsDevLoading] = useState(false);\n  const [isAnimating, setIsAnimating] = useState(false);\n  const translateY = useRef(new Animated.Value(0)).current;\n  const emitter = useMemo<EventEmitter>(() => {\n    try {\n      return new EventEmitter(DevLoadingViewNativeModule);\n    } catch (error) {\n      throw new Error(\n        'Failed to instantiate native emitter in `DevLoadingView` because the native module `DevLoadingView` is undefined: ' +\n          error.message\n      );\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!emitter) return;\n\n    function handleShowMessage(event: { message: string }) {\n      setMessage(event.message);\n      // TODO: if we show the refreshing banner and don't get a hide message\n      // for 3 seconds, warn the user that it's taking a while and suggest\n      // they reload\n\n      translateY.setValue(0);\n      setIsDevLoading(true);\n    }\n\n    function handleHide() {\n      // TODO: if we showed the 'refreshing' banner less than 250ms ago, delay\n      // switching to the 'finished' banner\n\n      setIsAnimating(true);\n      setIsDevLoading(false);\n      Animated.timing(translateY, {\n        toValue: 150,\n        delay: 1000,\n        duration: 350,\n        useNativeDriver: Platform.OS !== 'web',\n      }).start(({ finished }) => {\n        if (finished) {\n          setIsAnimating(false);\n          translateY.setValue(0);\n        }\n      });\n    }\n\n    const showMessageSubscription = emitter.addListener(\n      'devLoadingView:showMessage',\n      handleShowMessage\n    );\n    const hideSubscription = emitter.addListener('devLoadingView:hide', handleHide);\n\n    return function cleanup() {\n      showMessageSubscription.remove();\n      hideSubscription.remove();\n    };\n  }, [translateY, emitter]);\n\n  if (!isDevLoading && !isAnimating) {\n    return null;\n  }\n\n  return (\n    <Animated.View\n      style={[styles.animatedContainer, { transform: [{ translateY }] }]}\n      pointerEvents=\"none\">\n      <View style={styles.banner}>\n        <View style={styles.contentContainer}>\n          <View style={{ flexDirection: 'row' }}>\n            <Text style={styles.text}>{message}</Text>\n          </View>\n\n          <View style={{ flex: 1 }}>\n            <Text style={styles.subtitle}>\n              {isDevLoading ? 'Using Fast Refresh' : \"Don't see your changes? Reload the app\"}\n            </Text>\n          </View>\n        </View>\n      </View>\n    </Animated.View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  animatedContainer: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: 42, // arbitrary\n  },\n\n  banner: {\n    flex: 1,\n    overflow: 'visible',\n    backgroundColor: 'rgba(0,0,0,0.75)',\n    paddingBottom: getInitialSafeArea().bottom,\n  },\n  contentContainer: {\n    flex: 1,\n    paddingTop: 10,\n    paddingBottom: 5,\n    alignItems: 'center',\n    justifyContent: 'center',\n    textAlign: 'center',\n  },\n  text: {\n    color: '#fff',\n    fontSize: 15,\n  },\n  subtitle: {\n    color: 'rgba(255,255,255,0.8)',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}